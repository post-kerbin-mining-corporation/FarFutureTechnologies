PART
{
  name = nuclear-smelter-375
  module = Part
  author = Chris Adderley

  MODEL
  {
    model = Squad/Parts/Resources/ISRU/ISRU
    scale = 1.5,1.5,1.5
  }
  scale = 1
  rescaleFactor = 1

  node_stack_top = 0.0, 2.25, 0.0, 0.0, 1.0, 0.0, 3
  node_stack_bottom = 0.0, -2.25, 0.0, 0.0, -1.0, 0.0, 3

  TechRequired = advScienceTech
  entryCost = 24000
  cost = 8000
  category = Utility
  subcategory = 0
  title = 'Vulcan' Nuclear Smelter
  manufacturer = Post-Terran Mining Corporation
  description = This advanced fuel processor contains the necessary equipment for advanced processing of nuclear materials. In addition, its encapsulation mechanisms allow the creation of pellet-based fuels for nuclear propulsion applications.
  attachRules = 1,1,1,0,0

  // --- standard part parameters ---
  mass = 8
  dragModelType = default
  maximum_drag = 0.2
  minimum_drag = 0.2
  angularDrag = 2
  crashTolerance = 7
  maxTemp = 2000 // = 3500
  bulkheadProfiles = size2, srf
  tags = conver isru mine )mining (ore process resource
  	MODULE
  	{
  		name = ModuleOverheatDisplay
  	}

  	MODULE
  	{
  		 name = ModuleResourceConverter
  		 ConverterName = NuclearSaltWater
  		 StartActionName = Start Smelter [NSW]
  		 StopActionName = Stop Smelter [NSW]
  		AutoShutdown = true
  		TemperatureModifier
  		{
  			key = 0 100000
  			key = 750 50000
  			key = 1000 10000
  			key = 1250 500
  			key = 2000 50
  			key = 4000 0
  		}
  		GeneratesHeat = true
  		DefaultShutoffTemp = .8
  		ThermalEfficiency
  		{
  			key = 0 0 0 0
  			key = 500 0.1 0 0
  			key = 1000 1.0 0 0
  			key = 1250 0.1 0 0
  			key = 3000 0 0 0
  		}


  		UseSpecialistBonus = true
  		SpecialistEfficiencyFactor = 0.2
  		SpecialistBonusBase = 0.05
  		ExperienceEffect = ConverterSkill
  		EfficiencyBonus = 1


  		 INPUT_RESOURCE
  		 {
  			ResourceName = Water
  			Ratio = 1
  			FlowMode = STAGE_PRIORITY_FLOW
    	 }
       INPUT_RESOURCE
  		 {
  			ResourceName = EnrichedUranium
  			Ratio = 0.005
  			FlowMode = STAGE_PRIORITY_FLOW
    	 }
  		 INPUT_RESOURCE
  		 {

  			ResourceName = ElectricCharge
  			Ratio = 15
  		 }
  		 OUTPUT_RESOURCE
  		 {
  			ResourceName = NuclearSaltWater
  			Ratio = 1
  			DumpExcess = false
  			FlowMode = STAGE_PRIORITY_FLOW
  		 }

  	}

  	MODULE
  	{
  		 name = ModuleResourceConverter
  		 ConverterName = FissionPellets
  		 StartActionName = Start Smelter [FiT]
  		 StopActionName = Stop Smelter [FiT]
  		AutoShutdown = true
  		TemperatureModifier
  		{
  			key = 0 100000
  			key = 750 50000
  			key = 1000 10000
  			key = 1250 500
  			key = 2000 50
  			key = 4000 0
  		}
  		GeneratesHeat = true
  		DefaultShutoffTemp = .8
  		ThermalEfficiency
  		{
  			key = 0 0 0 0
  			key = 500 0.1 0 0
  			key = 1000 1.0 0 0
  			key = 1250 0.1 0 0
  			key = 3000 0 0 0
  		}

  		UseSpecialistBonus = true
  		SpecialistEfficiencyFactor = 0.2
  		SpecialistBonusBase = 0.05
  		ExperienceEffect = ConverterSkill
  		EfficiencyBonus = 1


  		 INPUT_RESOURCE
  		 {
  			ResourceName = EnrichedUranium
  			Ratio = 0.5
  		 }
  		 INPUT_RESOURCE
  		 {
  			ResourceName = ElectricCharge
  			Ratio = 30
  		 }
  		 OUTPUT_RESOURCE
  		 {
  			ResourceName = FissionTargets
  			Ratio = 1
  			DumpExcess = false
  		 }
  	}


  	MODULE
  	{
  		 name = ModuleResourceConverter
  		 ConverterName = FusionTargets
  		 StartActionName = Start ISRU [FuT]
  		 StopActionName = Stop ISRU [FuT]
  		AutoShutdown = true
  		TemperatureModifier
  		{
  			key = 0 100000
  			key = 750 50000
  			key = 1000 10000
  			key = 1250 500
  			key = 2000 50
  			key = 4000 0
  		}
  		GeneratesHeat = true
  		DefaultShutoffTemp = .8
  		ThermalEfficiency
  		{
  			key = 0 0 0 0
  			key = 500 0.1 0 0
  			key = 1000 1.0 0 0
  			key = 1250 0.1 0 0
  			key = 3000 0 0 0
  		}

  		UseSpecialistBonus = true
  		SpecialistEfficiencyFactor = 0.2
  		SpecialistBonusBase = 0.05
  		ExperienceEffect = ConverterSkill
  		EfficiencyBonus = 1


  		 INPUT_RESOURCE
  		 {
  			ResourceName = LqdDeuterium
  			Ratio = 1
  			FlowMode = STAGE_PRIORITY_FLOW
    		 }
         INPUT_RESOURCE
    		 {
    			ResourceName = LqdHe3
    			Ratio = 1.5
    			FlowMode = STAGE_PRIORITY_FLOW
      		 }
  		 INPUT_RESOURCE
  		 {
  			ResourceName = ElectricCharge
  			Ratio = 65
  		 }
  		 OUTPUT_RESOURCE
  		 {
  			ResourceName = FusionTargets
  			Ratio = 0.1
  			DumpExcess = false
  			FlowMode = STAGE_PRIORITY_FLOW
  		 }
  	}


  	MODULE
  	{
  		name = ModuleAnimationGroup
  		deployAnimationName =
  		activeAnimationName = ProcessorLarge_running
  		moduleType = Converter
  		autoDeploy = true
  	}


  	MODULE
  	{
  		name = ModuleCoreHeat
  		CoreTempGoal = 1000					//Internal temp goal - we don't transfer till we hit this point
  		CoreToPartRatio = 0.1				//Scale back cooling if the part is this % of core temp
  		CoreTempGoalAdjustment = 0			//Dynamic goal adjustment
  		CoreEnergyMultiplier = 0.1			//What percentage of our core energy do we transfer to the part
  		HeatRadiantMultiplier = 0.05		//If the core is hotter, how much heat radiates?
  		CoolingRadiantMultiplier = 0		//If the core is colder, how much radiates?
  		HeatTransferMultiplier = 0			//If the part is hotter, how much heat transfers in?
  		CoolantTransferMultiplier = 0.01	//If the part is colder, how much of our energy can we transfer?
  		radiatorCoolingFactor = 1			//How much energy we pull from core with an active radiator?  >= 1
  		radiatorHeatingFactor = 0.01		//How much energy we push to the active radiator
  		MaxCalculationWarp = 1000			//Based on how dramatic the changes are, this is the max rate of change
  		CoreShutdownTemp = 4000				//At what core temperature do we shut down all generators on this part?
  		MaxCoolant = 500					//Maximum amount of radiator capacity we can consume - 50 = 1 small
  	}

}
